<!DOCTYPE html>
<html>
<body>

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB-zFmpiLE-aiz-O68KBZsUMnr_TIzGFnk"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0/handlebars.js"></script>
<style type="text/css">
	body { font-family: "Helvetica",sans-serif; width: 100%; height: 100%; margin: 0px; padding: 0px; }

    #map {
    	position: absolute;
        width: 75%;
        height: 650px;
        margin: auto;
        float: right;
    }

    #homeTable{
    	background-color: #585c61;
    	float: right;
    	color: white;
    	text-align: center;
    	width: 20%;
    	height: 650px;
    	padding-left: 20px;
    	padding-right: 20px;
    	margin-right: 10px; 
    }

    #values{
    	text-align: center;
    	font-size: 13px;
    	margin-top: 100px;
    }

    .eachValue{
    	width: auto;
    	height: 70px;


    }

    .eachValue p{
    	margin: 5px 0px;
    }

</style>


<div id="map"> </div>
<div id="homeTable">
	
	<div id="lostData" style="display: none;">{{#each lostData}}<li >{{lat}},{{lang}},{{islost}}</li>{{/each}}</div>
	<div id="foundData" style="display: none;">{{#each foundData}}<li >{{lat}},{{lang}},{{islost}}</li>{{/each}}</div>

	<h1 style="color: #f4b324" >Sparreo</h1><hr>

	<div id="values ">
		<div class="eachValue">
			<p>Number of Lost items</p>
			<p id="total lost" style="font-size: 2em; color: #f4b324"></p>	
		</div>
		<div class="eachValue">
			<p>Number of Found items</p>
			<p id="total found" style="font-size: 2em; color: #f4b324"></p>
		</div>	
		<div class="eachValue">
			<p>Number of Matches</p>
			<p id="total matches" style="font-size: 2em; color: #f4b324">{{totalMatches}}</p>
		</div>
		<div class="eachValue">
			<p>Total reward offered by owners</p>
		</div>
		<div class="eachValue">
			<p>Total reward demanded by owners</p>
		</div>
	</div>
</div>


<script >
	$( window ).on("load",function() {

			var mapCanvas = document.getElementById("map");
			var mylatlang = new google.maps.LatLng(22.316833, 87.307273); 
			var mapOptions = {
			    center: mylatlang,
			    zoom: 16,
			    mapTypeId: google.maps.MapTypeId.ROADMAP
			};
			var map = new google.maps.Map(mapCanvas, mapOptions);

			// iteration over lost ans found data
			var type=["lost","found"];
			for(var j in type){
					var getId = (type[j]=="lost")?"lostData":"foundData";
					var putId = (type[j]=="lost")?"total lost":"total found";

					var dataArray = document.getElementById(getId).getElementsByTagName("li");
					document.getElementById(putId).innerHTML=dataArray.length;
					
					//adding markers	
					for(var i=0;i<dataArray.length;i++){

						//parsing data from lostData array
						var lat=parseFloat(dataArray[i].innerHTML.split(",")[0]);
						var lang=parseFloat(dataArray[i].innerHTML.split(",")[1]);
						var islost=dataArray[i].innerHTML.split(",")[2];

						var currLatLang= new google.maps.LatLng(lat, lang);

						if(islost==="false")
							var Icon='http://maps.google.com/mapfiles/ms/icons/green-dot.png';
						else 
							var Icon='http://maps.google.com/mapfiles/ms/icons/red-dot.png';

						var marker = new google.maps.Marker({
							icon: Icon,
						    position: currLatLang,
						    map: map,
						    title: islost
					  	});
					}
			}
	});

</script>

<!--
To use this code on your website, get a free API key from Google.
Read more at: https://www.w3schools.com/graphics/google_maps_basic.asp
-->


</body>
</html>
