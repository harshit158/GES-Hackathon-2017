<!DOCTYPE html>
<html>
<body>

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB-zFmpiLE-aiz-O68KBZsUMnr_TIzGFnk"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0/handlebars.js"></script>
<style type="text/css">
	body { font-family: "Helvetica",sans-serif; width: 100%; height: 100%; margin: 0px; padding: 0px; }

    #map {
    	position: absolute;
        width: 75%;
        height: 650px;
        margin: auto;
        float: right;
    }

    #homeTable{
    	background-color: #585c61;
    	float: right;
    	color: white;
    	text-align: center;
    	width: 20%;
    	height: 650px;
    	padding-left: 20px;
    	padding-right: 20px;
    	margin-right: 10px; 
    }

    #values{
    	text-align: center;
    	font-size: 13px;
    	margin-top: 100px;
    }

    .eachValue{
    	width: auto;
    	height: 70px;


    }

    .eachValue p{
    	margin: 5px 0px;
    }

</style>


<div id="map"> </div>
<div id="homeTable">
	<i class="fa fa-linkedin-square fa-2x" aria-hidden="true"></i> 
	<div id="dataFromServer" style="display: none;">{{#each dataVar}}<li >{{lat}},{{lang}},{{islost}}</li>{{/each}}</div>
	<h1 style="color: #f4b324" >Sparreo</h1><hr>

	<div id="values ">
		<div class="eachValue">
			<p>Number of Lost items</p>
			<p id="lost items" style="font-size: 2em; color: #f4b324"></p>	
		</div>
		<div class="eachValue">
			<p>Number of Found items</p>
		</div>	
		<div class="eachValue">
			<p>Number of Matches</p>
		</div>
		<div class="eachValue">
			<p>Total reward offered by owners</p>
		</div>
		<div class="eachValue">
			<p>Total reward demanded by owners</p>
		</div>
	</div>
</div>


<script >
	$( window ).on("load",function() {

	//lis is array of li elements
	var lis = document.getElementById("dataFromServer").getElementsByTagName("li");
	document.getElementById("lost items").innerHTML=lis.length;
	
	var mapCanvas = document.getElementById("map");
	var mylatlang = new google.maps.LatLng(41.926536, 0.163609); 
	var mapOptions = {
	    center: mylatlang,
	    zoom: 2,
	    mapTypeId: google.maps.MapTypeId.ROADMAP
	};
	var map = new google.maps.Map(mapCanvas, mapOptions);

	//adding markers	
	for(var i=0;i<lis.length;i++){

		//parsing data from lis array
		var lat=parseFloat(lis[i].innerHTML.split(",")[0]);
		var lang=parseFloat(lis[i].innerHTML.split(",")[1]);
		var islost=lis[i].innerHTML.split(",")[2];

		var currLatLang= new google.maps.LatLng(lat, lang);

		if(lis[i].innerHTML.split(",")[2]=="false")
			var Icon='http://maps.google.com/mapfiles/ms/icons/green-dot.png';
		else 
			var Icon='http://maps.google.com/mapfiles/ms/icons/red-dot.png';
		var marker = new google.maps.Marker({
		icon: Icon,
	    position: currLatLang,
	    map: map,
	    title: islost
	  	});
	}
	});

</script>

<!--
To use this code on your website, get a free API key from Google.
Read more at: https://www.w3schools.com/graphics/google_maps_basic.asp
-->


</body>
</html>
